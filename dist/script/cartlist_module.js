"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCartlist=void 0,require("https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js");var _constant_module=require("./constant_module.js"),getCartlist=function(){for(var a=localStorage.getItem("goodsSid").split(","),l=localStorage.getItem("goodsNum").split(","),i=$(".cartlist_body"),t=0;t<a.length;t++)!function(c){$.ajax({url:_constant_module.href+"/php/getsid.php",data:{dataSid:a[c]},dataType:"json",success:function(t){var e;t&&((e=$(".cartlist_row:hidden").clone(!0,!0)).css("display","flex"),e.attr("index",t.sid),e.find(".cartlist_centent_text").text(t.title).prop("href",_constant_module.href+"/src/detail.html?sid="+a[c]),e.find(".carli_price_js").text(t.price),e.find(".cartli_img").prop("src",t.picurl),e.find(".cartli_number_cent").val(l[c]).attr("index",t.sid),i.append(e),update())}})}(t);$(".alone_check").on("click",function(){$(".alone_check:visible").length===$(".alone_check:checked").length-1?$(".all_check").prop("checked",!0):$(".all_check").prop("checked",!1),update()}),$(".all_check").on("click",function(){$(this).is(":checked")?$(".checkbox").prop("checked",!0):$(".checkbox").prop("checked",!1),update()}),$(".cartli_number_jian").on("click",function(){var t=$(this).siblings(".cartli_number_cent");1<t.val()&&t.val(+t.val()-1),l[a.indexOf(t.attr("index"))]=t.val(),update(),updateLocalNum(l)}),$(".cartli_number_jia").on("click",function(){var t=$(this).siblings(".cartli_number_cent");t.val(+t.val()+1),l[a.indexOf(t.attr("index"))]=t.val(),update(),updateLocalNum(l)}),$(".cartli_number_cent").on("input",function(){update()}),$(".cartli_delete").on("click",function(){var t,e;confirm("您确定要删除吗?")&&(t=$(this).parents(".cartlist_row"),e=a.indexOf(t.attr("index")),a.splice(e,1),l.splice(e,1),t.remove(),updateLocal(a,l))}),$(".cartlist_count_text_js").on("click",function(){if(confirm("您确定要删除选定项吗?")){var t=$(".cartlist_row:visible .alone_check:checked").parents(".cartlist_row");console.log($(".cartlist_row:visible .alone_check:checked"));for(var e=0;e<t.length;e++){var c=$(t[e]),i=a.indexOf(c.attr("index"));c.remove(),a.splice(i,1),l.splice(i,1),updateLocal(a,l)}}})},updateLocal=function(t,e){updateLocalId(t),updateLocalNum(e)},updateLocalId=function(t){localStorage.setItem("goodsSid",t)},updateLocalNum=function(t){localStorage.setItem("goodsNum",t)},update=function(){for(var t=$(".cartlist_row:visible .cartli_number_cent"),e=$(".cartlist_row:visible .cartli_check>input"),c=$(".cartlist_row:visible .carli_price_js"),i=$(".cartlist_row:visible .carli_total_price"),a=$(".cartli_count_num_cent_js"),l=0,r=0;r<e.length;r++){var n=$(e[r]),o=$(t[r]),s=$(c[r]),d=$(i[r]);d.text(o.val()*s.text()),n.is(":checked")&&(l+=+d.text())}a.text(l)};exports.getCartlist=getCartlist;