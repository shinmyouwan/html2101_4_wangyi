"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDetail=void 0,require("https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"),require("https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js");var _constant_module=require("./constant_module.js"),sid=(sid=location.search.substring(1).split("=")[1])||1,timer=null,getDetail=function(){var a=$(".product_simg_box"),d=$(".product_title"),l=$(".product_ct_num"),n=$(".detail_title");$.ajax({url:_constant_module.href+"/php/getsid.php",data:{dataSid:sid},dataType:"json",success:function(t){if(t){if($(".product_img_big, .product_img_cent").prop("src",t.picurl),n.text(t.title),d.text(t.title),l.text(t.price),i=t.piclisturl){var i=i.split(","),e=!0,o=!1,c=void 0;try{for(var r,s=i[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var p='<img src="'+r.value+'" alt="">';a.append(p)}}catch(t){o=!0,c=t}finally{try{!e&&s.return&&s.return()}finally{if(o)throw c}}}else a.append('<img src="'+t.picurl+'" alt="">');setDetail()}}})},setDetail=function(){var e=$(".product_img_f"),t=$(".product_img_cent"),i=$(".product_img_hide"),o=$(".product_img_big"),c=$(".product_simg_box"),r=$(".product_simg_box>img"),s=i.width()/e.width(),p=i.height()/e.height(),a=e.width()/2,d=e.height()/2,l=t.offset();$(".product_img_box").hover(function(){e.show(),i.show()},function(){e.hide(),i.hide()}),$(".product_img_box").on("mousemove",function(t){var i=t.pageX-l.left-d,t=t.pageY-l.top-a;i<0?i=0:200<i&&(i=200),t<0?t=0:200<t&&(t=200),e.css("top",t),e.css("left",i),o.css("top",-p*t),o.css("left",-s*i)});var n=void 0;r.hover(function(){r.removeClass("product_simg_active"),(n=$(this)).addClass("product_simg_active");var t=n.prop("src").split(",w_64");t.splice(1,0,",w_800"),$(".product_img_big, .product_img_cent").prop("src",t.join(""))}),$(".product_simg_next").on("click",function(){var t=$(".product_simg_active"),t=r.index(t);t<r.length-1&&($(r[t]).removeClass("product_simg_active"),$(r[t+1]).addClass("product_simg_active"),(t=$(r[t+1]).prop("src").split(",w_64")).splice(1,0,",w_800"),$(".product_img_big, .product_img_cent").prop("src",t.join("")),(t=+c.css("left").split("px")[0])>-80*(r.length-4)&&c.css("left",t-80+"px"))}),$(".product_simg_pre").on("click",function(){var t=$(".product_simg_active"),t=r.index(t);0<t&&($(r[t]).removeClass("product_simg_active"),$(r[t-1]).addClass("product_simg_active"),(t=$(r[t-1]).prop("src").split(",w_64")).splice(1,0,",w_800"),$(".product_img_big, .product_img_cent").prop("src",t.join("")),(t=+c.css("left").split("px")[0])<0&&c.css("left",80+t+"px"))});var _=$(".product_number_cent");$(".product_number_jian").on("click",function(){var t=_.val();1<t&&_.val(+t-1)}),$(".product_number_jia").on("click",function(){var t=_.val();_.val(+t+1)}),$(".product_cart").on("click",function(){var t,i=localStorage.getItem("goodsSid"),e=localStorage.getItem("goodsNum"),e=i&&e?(i=i.split(","),e.split(",")):(i=[],[]),o=$(".product_number_cent");-1===i.indexOf(sid)?(i.push(sid),e.push(o.val())):e[t=i.indexOf(sid)]=+e[t]+ +o.val(),localStorage.setItem("goodsSid",i),localStorage.setItem("goodsNum",e)})};exports.getDetail=getDetail;